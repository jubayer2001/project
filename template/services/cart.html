<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>{{ provider.name }} | MomentsMaker</title>

     <link rel="stylesheet" href="{% static 'css/styles.css' %}">
  <link rel="stylesheet" href="{% static 'css/cart.css' %}">

</head>
<body>
  <header>
    <div class="logo"><span>Moments</span>Maker</div>
    <nav>
      <a href="{% url 'home' %}">Home</a>
      <a href="{% url 'services' %}">Services</a>
      <a href="{% url 'help' %}">Help & Support</a>
      <a href="{% url 'about' %}">About Us</a>

      <div class="profile-dropdown">
  {% if user.is_authenticated %}
    <span class="icon" id="profileIcon">{{ user.last_name }}</span>
    <div class="dropdown-menu" id="dropdownMenu">
      <a href="{% url 'profile' %}">Profile</a>
      <a href="{% url 'cart' %}">My Cart</a>

      <a href="{% url 'logout' %}">Logout</a>
    </div>
  {% else %}
    <span class="icon" id="profileIcon">ðŸ‘¤</span>
    <div class="dropdown-menu" id="dropdownMenu">
      <a href="{% url 'login' %}">Login</a>
    </div>
  {% endif %}
</div>

    </nav>
  </header>
<main>
    <div class="cart-container">
        <h1>Your Cart</h1>

       <div class="cart-items">
     {% for provider in providers %}
     <div class="cart-item">
     <div class="item-details">
      <h2>{{ provider.service_type }}: {{ provider.name }}</h2>
      <p>Category: {{ provider.get_service_type_display }}</p>
      <p class="price">à§³{{ provider.price }}</p>
    </div>
    <a href="{% url 'remove_from_cart' provider.id %}" class="remove-btn">Remove</a>
   </div>
  {% endfor %}
 </div>

 <div class="cart-footer">
  <div class="total">Total: à§³{{ total }}</div>
  <div class="cart-buttons">
    <a href="{% url 'services' %}">
      <button class="btn">Find More</button>
    </a>
    <button class="btn" disabled>Checkout</button>
  </div>
  </div>
</main>

  <footer class="footer">
    <p>Â© 2025 MomentsMaker. All Rights Reserved.</p>
    <div class="social-icons">
      <a href="#"><img src="{% static 'images/facebook.svg' %}" alt="Facebook" /></a>
      <a href="#"><img src="{% static 'images/instagram.svg' %}" alt="Instagram" /></a>
      <a href="#"><img src="{% static 'images/tiktok.svg' %}" alt="TikTok" /></a>
    </div>
  </footer>
  <script>
      const profileIcon = document.getElementById('profileIcon');
    const dropdownMenu = document.getElementById('dropdownMenu');

    if (profileIcon) {
      profileIcon.addEventListener('click', () => {
        dropdownMenu.style.display = dropdownMenu.style.display === 'block' ? 'none' : 'block';
      });

      window.addEventListener('click', (e) => {
        if (!profileIcon.contains(e.target) && !dropdownMenu.contains(e.target)) {
          dropdownMenu.style.display = 'none';
        }
      });
    }
    const profileIcon = document.getElementById('profileIcon');
    const dropdownMenu = document.getElementById('dropdownMenu');
    const authLink = document.getElementById('authLink');

    // Simulate login state (use real auth logic here)
    const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';

    // Update auth link text and behavior
    if (isLoggedIn) {
      authLink.textContent = 'Logout';
      authLink.href = 'login.html';
      authLink.addEventListener('click', () => {
        localStorage.setItem('isLoggedIn', 'false');
        window.location.reload(); // or redirect to homepage
      });
    } else {
      authLink.textContent = 'Login';
      authLink.href = 'login.html';
    }

    profileIcon.addEventListener('click', () => {
      dropdownMenu.style.display = dropdownMenu.style.display === 'block' ? 'none' : 'block';
    });

    window.addEventListener('click', (e) => {
      if (!profileIcon.contains(e.target) && !dropdownMenu.contains(e.target)) {
        dropdownMenu.style.display = 'none';
      }
    });
  </script>


</body>
</html>