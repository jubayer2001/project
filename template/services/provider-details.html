<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>{{ provider.name }} | MomentsMaker</title>
  <link rel="stylesheet" href="{% static 'css/styles.css' %}" />
  <link rel="stylesheet" href="{% static 'css/details.css' %}">
</head>
<body>

  <!-- Header/Navbar -->
  <header>
    <div class="logo"><span>Moments</span>Maker</div>
    <nav>
      <a href="{% url 'home' %}">Home</a>
      <a href="{% url 'services' %}">Services</a>
      <a href="{% url 'help' %}">Help & Support</a>
      <a href="{% url 'about' %}">About Us</a>

      <div class="profile-dropdown">
  {% if user.is_authenticated %}
    <span class="icon" id="profileIcon">{{ user.last_name }}</span>
    <div class="dropdown-menu" id="dropdownMenu">
      <a href="{% url 'profile' %}">Profile</a>
      <a href="{% url 'cart' %}">My Cart</a>

      <a href="{% url 'logout' %}">Logout</a>
    </div>
  {% else %}
    <span class="icon" id="profileIcon">ðŸ‘¤</span>
    <div class="dropdown-menu" id="dropdownMenu">
      <a href="{% url 'login' %}">Login</a>
    </div>
  {% endif %}
</div>

    </nav>
  </header>

  <section class="details-section">
    <div class="details-img">
      <img src="{{ provider.image.url }}" alt="{{ provider.name }}" />
    </div>
    <div class="details-info">
      <h2>{{ provider.name }}</h2>
      <div class="rating">
        <span>â˜…</span><span>â˜…</span><span>â˜…</span><span>â˜…</span><span>â˜†</span>
      </div>
      <p><strong>Service Type:</strong> {{ provider.get_service_type_display }}</p>
      <p><strong>Location:</strong> {{ provider.get_location_display }}</p>
      <p><strong>Charge:</strong> à§³{{ provider.price }}</p>
      <p><strong>Experience:</strong> {{ provider.experience }} Years</p>
      <p><strong>Available Dates:</strong> {{ provider.available_dates|join:", " }}</p>

      <div class="description-box">
        {{ provider.short_desc }}
      </div>
      <a href="{% url 'add_to_cart' provider.id %}" class="btn">Hire Now</a>
    </div>
  </section>

  <!-- Footer -->

   <footer class="footer">
    <p>Â© 2025 MomentsMaker. All Rights Reserved.</p>
    <div class="social-icons">
      <a href="#"><img src="{% static 'images/facebook.svg' %}" alt="Facebook" /></a>
      <a href="#"><img src="{% static 'images/instagram.svg' %}" alt="Instagram" /></a>
      <a href="#"><img src="{% static 'images/tiktok.svg' %}" alt="TikTok" /></a>
    </div>
  </footer>
  <script>
    const profileIcon = document.getElementById('profileIcon');
    const dropdownMenu = document.getElementById('dropdownMenu');

    if (profileIcon) {
      profileIcon.addEventListener('click', () => {
        dropdownMenu.style.display = dropdownMenu.style.display === 'block' ? 'none' : 'block';
      });

      window.addEventListener('click', (e) => {
        if (!profileIcon.contains(e.target) && !dropdownMenu.contains(e.target)) {
          dropdownMenu.style.display = 'none';
        }
      });
    }
    const profileIcon = document.getElementById('profileIcon');
    const dropdownMenu = document.getElementById('dropdownMenu');
    const authLink = document.getElementById('authLink');

    // Simulate login state (use real auth logic here)
    const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';

    // Update auth link text and behavior
    if (isLoggedIn) {
      authLink.textContent = 'Logout';
      authLink.href = 'login.html';
      authLink.addEventListener('click', () => {
        localStorage.setItem('isLoggedIn', 'false');
        window.location.reload(); // or redirect to homepage
      });
    } else {
      authLink.textContent = 'Login';
      authLink.href = 'login.html';
    }

    profileIcon.addEventListener('click', () => {
      dropdownMenu.style.display = dropdownMenu.style.display === 'block' ? 'none' : 'block';
    });

    window.addEventListener('click', (e) => {
      if (!profileIcon.contains(e.target) && !dropdownMenu.contains(e.target)) {
        dropdownMenu.style.display = 'none';
      }
    });
  </script>

</body>
</html>
